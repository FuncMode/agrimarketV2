<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seller Dashboard - AgriMarket</title>
  
  <!-- Security Headers (set via nginx/server, not meta tags) -->
  <meta name="referrer" content="strict-origin-when-cross-origin">
  
  <!-- DNS Prefetch & Preconnect -->
  <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://unpkg.com">
  <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
  
  <!-- Preload Critical CSS -->
  <link rel="preload" href="/assets/css/main.css" as="style">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" integrity="sha384-4LISF5TTJX/fLmGSxO53rV4miRxdg84mZsxmO8Rx5jGtp/LbrixFETvWa5a6sESd" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/components.css">
  <link rel="stylesheet" href="/assets/css/utilities.css">

    <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75' fill='%2328a745'>ðŸŒ¾</text></svg>">
</head>
<body class="bg-light">
  
  <!-- Navbar -->
  <nav id="main-navbar" class="navbar"></nav>
  
  <div class="container mx-auto px-4 py-4 sm:py-6 md:py-8">
    
    <!-- Products Section -->
    <section id="products" class="mb-8 sm:mb-12">
      <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 sm:mb-6 gap-3">
        <h2 class="text-2xl sm:text-3xl font-bold">My Products</h2>
        <button id="btn-create-product" class="btn btn-primary self-start sm:self-auto whitespace-nowrap">
          <i class="bi bi-plus-circle"></i> Add Product
        </button>
      </div>
      
      <!-- Product Table -->
      <div class="card">
        <div class="card-body">
          <!-- Mobile Card View -->
          <div class="block md:hidden" id="products-mobile-view">
            <!-- Mobile cards will be rendered by JS -->
          </div>
          
          <!-- Desktop Table View -->
          <div class="hidden md:block overflow-x-auto">
            <table class="table w-full">
              <thead>
                <tr>
                  <th class="text-left">Product</th>
                  <th class="text-left">Category</th>
                  <th class="text-left">Price</th>
                  <th class="text-left">Stock</th>
                  <th class="text-left">Status</th>
                  <th class="text-left">Actions</th>
                </tr>
              </thead>
              <tbody id="products-table-body">
                <!-- Rows rendered by JS -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Orders Section -->
    <section id="orders" class="mb-8 sm:mb-12">
      <h2 class="text-2xl sm:text-3xl font-bold mb-4 sm:mb-6">Orders</h2>
      
      <!-- Order Filters -->
      <div class="flex gap-2 sm:gap-4 mb-4 sm:mb-6 flex-wrap">
        <button class="btn btn-outline order-filter active text-sm sm:text-base px-2 sm:px-4" data-status="all">All</button>
        <button class="btn btn-outline order-filter text-sm sm:text-base px-2 sm:px-4" data-status="pending">Pending</button>
        <button class="btn btn-outline order-filter text-sm sm:text-base px-2 sm:px-4" data-status="confirmed">Confirmed</button>
        <button class="btn btn-outline order-filter text-sm sm:text-base px-2 sm:px-4" data-status="ready">Ready</button>
        <button class="btn btn-outline order-filter text-sm sm:text-base px-2 sm:px-4" data-status="completed">Completed</button>
        <button class="btn btn-outline order-filter text-sm sm:text-base px-2 sm:px-4" data-status="cancelled">Cancelled</button>
      </div>
      
      <!-- Orders List -->
      <div id="orders-list"></div>
    </section>
    
    <!-- My Issues Section -->
    <section id="my-issues" class="mb-8 sm:mb-12">
      <h2 class="text-2xl sm:text-3xl font-bold mb-4 sm:mb-6">My Issues</h2>
      
      <!-- Issue Filters -->
      <div class="flex gap-4 mb-6 flex-wrap">
        <button class="btn btn-outline issue-filter active" data-status="all">All</button>
        <button class="btn btn-outline issue-filter" data-status="under_review">Under Review</button>
        <button class="btn btn-outline issue-filter" data-status="resolved">Resolved</button>
        <button class="btn btn-outline issue-filter" data-status="rejected">Rejected</button>
      </div>
      
      <!-- Issues List -->
      <div id="issues-list" class="space-y-4">
        <!-- Issues rendered by JS -->
      </div>
    </section>
    
    <!-- Messaging Section -->
    <section id="messaging" class="mb-8 sm:mb-12">
      <h2 class="text-2xl sm:text-3xl font-bold mb-4 sm:mb-6">Messages</h2>
      
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Conversations List -->
        <div class="lg:col-span-1">
          <div class="card">
            <div class="card-body">
              <h3 class="text-lg font-bold mb-4">Conversations</h3>
              <div id="conversations-list">
                <!-- Conversations rendered by JS -->
              </div>
            </div>
          </div>
        </div>
        
        <!-- Chat Window -->
        <div class="lg:col-span-2">
          <div class="card">
            <div class="card-body">
              <div id="chat-window">
                <p class="text-center text-gray-500 py-12">Select a conversation to start messaging</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Analytics Section -->
    <section id="analytics" class="mb-8 sm:mb-12">
      <h2 class="text-2xl sm:text-3xl font-bold mb-4 sm:mb-6">Analytics</h2>
      
      <!-- Stats Cards -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8">
        <div class="card">
          <div class="card-body">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-gray-600 text-sm">Total Products</p>
                <p id="stat-products" class="text-xl sm:text-2xl lg:text-3xl font-bold">0</p>
              </div>
              <i class="bi bi-box text-primary text-2xl sm:text-3xl lg:text-4xl"></i>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-body">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-gray-600 text-sm">Pending Orders</p>
                <p id="stat-pending" class="text-xl sm:text-2xl lg:text-3xl font-bold">0</p>
              </div>
              <i class="bi bi-clock text-warning text-2xl sm:text-3xl lg:text-4xl"></i>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-body">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-gray-600 text-sm">Total Sales</p>
                <p id="stat-sales" class="text-xl sm:text-2xl lg:text-3xl font-bold">â‚±0</p>
              </div>
              <i class="bi bi-cash text-success text-2xl sm:text-3xl lg:text-4xl"></i>
            </div>
          </div>
        </div>
      </div>
      
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
        <div class="card">
          <div class="card-body">
            <h3 class="text-lg sm:text-xl font-bold mb-4">Sales Overview</h3>
            <div class="h-[250px] sm:h-[300px]">
              <canvas id="sales-chart"></canvas>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <h3 class="text-lg sm:text-xl font-bold mb-4">Top Products</h3>
            <div class="h-[250px] sm:h-[300px]">
              <canvas id="products-chart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Profile Section -->
    <section id="profile" class="mb-8 sm:mb-12">
      <h2 class="text-2xl sm:text-3xl font-bold mb-4 sm:mb-6">My Profile</h2>
      <div id="profile-content">
        <p class="text-center text-gray-500 py-8">Loading profile...</p>
      </div>
    </section>
    
  </div>
  
  <!-- Toast Container -->
  <div id="toast-container"></div>
  
  <!-- Product Modal (Create/Edit) -->
  <div id="product-modal" style="display: none;"></div>
  
  <!-- Chart.js -->
  <script src="https://unpkg.com/chart.js" defer></script>
  
  <!-- Socket.io Client Library -->
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js" integrity="sha384-/KNQL8Nu5gCHLqwqfQjA689Hhoqgi2S84SNUxC3roTe4EhJ9AfLkp8QiQcU8AMzI" crossorigin="anonymous" defer></script>
  
  <script src="/assets/js/config/env-loader.js"></script>
  
  <!-- Performance & Security -->
  <script type="module">
    import { initPerformanceMonitoring } from '/assets/js/utils/performance-monitor.js';
    import { initLazyLoading } from '/assets/js/utils/lazy-loader.js';
    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
      initPerformanceMonitoring();
    }
    initLazyLoading();
  </script>
  
  <script type="module" src="/assets/js/pages/seller.main.js"></script>
</body>
</html>